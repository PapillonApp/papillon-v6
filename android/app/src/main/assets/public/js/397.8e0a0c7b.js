"use strict";(self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[]).push([[397],{8527:(e,t,s)=>{s.d(t,{Vb:()=>o,LE:()=>a});var a,n=s(9895);(function(e){e["Default"]="DEFAULT",e["Destructive"]="DESTRUCTIVE",e["Cancel"]="CANCEL"})(a||(a={}));const o=(0,n.fo)("ActionSheet",{web:()=>s.e(185).then(s.bind(s,8185)).then((e=>new e.ActionSheetWeb))})},2068:(e,t,s)=>{s.d(t,{V:()=>n});var a=s(9895);const n=(0,a.fo)("Dialog",{web:()=>s.e(674).then(s.bind(s,5674)).then((e=>new e.DialogWeb))})},2605:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(9895);const n=(0,a.fo)("Network",{web:()=>s.e(466).then(s.bind(s,2466)).then((e=>new e.NetworkWeb))})},4161:(e,t,s)=>{s.d(t,{m:()=>n});var a=s(9895);const n=(0,a.fo)("Share",{web:()=>s.e(811).then(s.bind(s,5462)).then((e=>new e.ShareWeb))})},7686:(e,t,s)=>{var a=s(2109),n=s(7908),o=s(6244),l=s(9303),r=s(1223);a({target:"Array",proto:!0},{at:function(e){var t=n(this),s=o(t),a=l(e),r=a>=0?a:s+a;return r<0||r>=s?void 0:t[r]}}),r("at")},4506:(e,t,s)=>{var a=s(2109),n=s(1702),o=s(4488),l=s(9303),r=s(1340),i=s(7293),u=n("".charAt),d=i((function(){return"\ud842"!=="†Æ∑".at(-2)}));a({target:"String",proto:!0,forced:d},{at:function(e){var t=r(o(this)),s=t.length,a=l(e),n=a>=0?a:s+a;return n<0||n>=s?void 0:u(t,n)}})},6520:(e,t,s)=>{function a(e){for(let t=0;t<e.length;t++){const s=e[t],a=new Date(s.time.start),n=new Date(s.time.end);for(let o=0;o<e.length;o++){const l=e[o],r=new Date(l.time.start),i=new Date(l.time.end);a<=r&&n>=i&&s.course.num!=l.course.num&&(s.course.num>l.course.num?e[o].course.sameTime=!0:e[t].course.sameTime=!0)}}return e}function n(e){const t=new Date;for(let s=0;s<e.length;s++){const a=e[s],n=new Date(a.time.start),o=new Date(a.time.end);n<=t&&o>=t&&0==a.course.sameTime?e[s].course.actual=!0:e[s].course.actual=!1}return e}function o(e){for(let t=0;t<e.length;t++){const s=e[t],a=new Date(s.time.start);if(t>0){const s=e[t-1],n=new Date(s.time.end);a-n>=9e5&&(e[t].course.distance=!0)}}return e}function l(e){for(let t=0;t<e.length;t++){const s=e[t],a=new Date(s.time.start),n=new Date(s.time.end);let o=n-a;o=o/1e3/60/60,e[t].course.lengthCours=o}return e}function r(e){return e=a(e),e=l(e),e=o(e),e=n(e),e}s.d(t,{Z:()=>i});const i=r},5397:(e,t,s)=>{s.r(t),s.d(t,{default:()=>us});var a=s(6252);function n(e,t,s,n,o,l){var r=(0,a.up)("ion-nav"),i=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(r,{root:o.component,ref:"page"},null,8,["root"])]})),_:1})}var o=s(5274),l=(s(8862),s(3577)),r=s(9963);const i=e=>((0,a.dD)("data-v-09cc22ac"),e=e(),(0,a.Cn)(),e),u=i((()=>(0,a._)("span",{class:"expand_title material-symbols-outlined mdls"},"expand_more",-1))),d=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"calendar_month",-1))),c=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"icon-only"},"add",-1))),m=i((()=>(0,a._)("div",{id:"noTouchZone"},null,-1))),p={key:0},g={key:0},h={key:0,class:"NoCours"},f=i((()=>(0,a._)("h1",null,"üòå",-1))),w=i((()=>(0,a._)("h2",null,"Aucun cours aujourd'hui",-1))),_=i((()=>(0,a._)("p",null,"S√©lectionnez un autre jour dans le calendrier ou balayez l‚Äô√©cran pour changer de journ√©e.",-1))),C={key:0,class:"NoCours"},v=i((()=>(0,a._)("h1",null,"üåè",-1))),y=i((()=>(0,a._)("h2",null,"Pas de connexion √† Internet",-1))),b=i((()=>(0,a._)("p",null,"Vous pouvez uniquement consulter les journ√©es d√©j√† charg√©es pr√©alablement lorsque vous √™tes hors-ligne.",-1))),D=[v,y,b],k={key:1,class:"NoCours"},S=i((()=>(0,a._)("h1",null,"üõ†Ô∏è",-1))),I=i((()=>(0,a._)("h2",null,"Serveurs indisponibles",-1))),W=i((()=>(0,a._)("p",null,"Vous pouvez uniquement consulter les journ√©es d√©j√† charg√©es pr√©alablement. Nos serveurs seront bient√¥t de nouveaux disponibles.",-1))),P=[S,I,W],T={key:1},$={class:"loadingSpin"},E=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"location_on",-1))),N=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"face",-1))),M=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"groups",-1))),j=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"schedule",-1))),x={class:"timeInput",slot:"end"},A=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"schedule",-1))),R={class:"timeInput",slot:"end"},L=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"palette",-1))),U={slot:"end"},q={type:"color",ref:"newCoursColorRef"},O=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"history_edu",-1))),z=i((()=>(0,a._)("p",null,"Nom de la mati√®re",-1))),B=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"share",-1))),V=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"face",-1))),H=i((()=>(0,a._)("p",null,"Professeur",-1))),G=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"meeting_room",-1))),F=i((()=>(0,a._)("p",null,"Salle",-1))),Z=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"description",-1))),J=i((()=>(0,a._)("p",null,"M√©mo",-1))),Y={class:"display-all"},K=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),Q=i((()=>(0,a._)("p",null,"Horaires",-1))),X=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"notifications",-1))),ee=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"notifications_off",-1))),te=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"pending_actions",-1))),se=i((()=>(0,a._)("p",null,"Dur√©e du cours",-1))),ae=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"error",-1))),ne=i((()=>(0,a._)("p",null,"Statut",-1))),oe=i((()=>(0,a._)("br",null,null,-1))),le=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"info",-1))),re=i((()=>(0,a._)("p",null,"Statut",-1))),ie=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"info",-1))),ue=i((()=>(0,a._)("p",null,"Statut",-1))),de=i((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1)));function ce(e,t,s,n,o,i){const v=(0,a.up)("ion-menu-button"),y=(0,a.up)("ion-buttons"),b=(0,a.up)("ion-title"),S=(0,a.up)("ion-item"),I=(0,a.up)("ion-list"),W=(0,a.up)("ion-popover"),ce=(0,a.up)("ion-button"),me=(0,a.up)("ion-progress-bar"),pe=(0,a.up)("IonToolbar"),ge=(0,a.up)("IonHeader"),he=(0,a.up)("ion-refresher-content"),fe=(0,a.up)("ion-refresher"),we=(0,a.up)("IonFab"),_e=(0,a.up)("CoursElement"),Ce=(0,a.up)("IonNavLink"),ve=(0,a.up)("IonSpinner"),ye=(0,a.up)("IonList"),be=(0,a.up)("swiper-slide"),De=(0,a.up)("swiper"),ke=(0,a.up)("ion-input"),Se=(0,a.up)("IonTitle"),Ie=(0,a.up)("ion-label"),We=(0,a.up)("ion-content"),Pe=(0,a.up)("IonModal"),Te=(0,a.up)("IonDatetime"),$e=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)($e,{ref:"pageHere"},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,{class:"AppHeader"},{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{color:"dark"})])),_:1}),(0,a.Wm)(b,{id:"title"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Ma journ√©e "),u])),_:1}),(0,a.Wm)(W,{trigger:"title","trigger-action":"click"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{lines:"none"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{onClick:t[0]||(t[0]=t=>e.addDayToCalendar()),button:!0,detail:!1},{default:(0,a.w5)((()=>[(0,a.Uk)(" Ajouter au calendrier ")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(y,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{id:"rnPickerModalButton",color:"dark",onClick:t[1]||(t[1]=t=>e.changernPickerModalOpen(!0))},{default:(0,a.w5)((()=>[d,(0,a._)("p",null,(0,l.zw)(e.rnButtonString),1)])),_:1})])),_:1}),e.isLoading?((0,a.wg)(),(0,a.j4)(me,{key:0,type:"indeterminate"})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(We,{fullscreen:!0,class:"content"},{default:(0,a.w5)((()=>[(0,a.Wm)(fe,{slot:"fixed",onIonRefresh:t[2]||(t[2]=t=>e.handleRefresh(t))},{default:(0,a.w5)((()=>[(0,a.Wm)(he)])),_:1}),(0,a.Wm)(we,{slot:"fixed",vertical:"bottom",horizontal:"end",class:"newCoursBtnFab"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{onClick:t[3]||(t[3]=t=>e.setNewCoursModalOpen(!0)),size:"large",shape:"round",class:"newCoursBtn",mode:"md"},{default:(0,a.w5)((()=>[c])),_:1})])),_:1}),m,(0,a.Wm)(De,{class:"swiper",ref:"swiper",modules:[e.Virtual],virtual:"",initialSlide:e.baseIndex,speed:200,spaceBetween:10,preventClicks:!0},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.slides,((s,n)=>((0,a.wg)(),(0,a.j4)(be,{class:"slide",key:n,virtualIndex:n},{default:(0,a.w5)((()=>[(0,a.Wm)(ye,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r.W3,{name:"CoursAnim",tag:"div",id:"DayData"},{default:(0,a.w5)((()=>[e.currentIndex==n&&e.loaded&&e.days[n].length>0?((0,a.wg)(),(0,a.iD)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.days[`${n}`],(t=>((0,a.wg)(),(0,a.j4)(Ce,{key:t.id,"router-direction":"forward",component:e.CoursView,componentProps:{urlCours:encodeURIComponent(JSON.stringify(t))}},{default:(0,a.w5)((()=>[(0,a.Wm)(_e,{subject:t.data.subject,teachers:t.data.teachers.join(", ")||"Pas de professeur",rooms:t.data.rooms.join(", ")||"Pas de salle",groupNames:t.data.groupNames.join(", ")||null,memo:t.data.hasMemo,start:t.time.start,end:t.time.end,color:t.course.color,sameTime:t.course.sameTime,status:t.status.status,isCancelled:t.status.isCancelled,isDetention:t.status.isDetention,isExempted:t.status.isExempted,isOuting:t.status.isOuting,isTest:t.status.isTest,distance:t.course.distance,lengthCours:t.course.lengthCours},null,8,["subject","teachers","rooms","groupNames","memo","start","end","color","sameTime","status","isCancelled","isDetention","isExempted","isOuting","isTest","distance","lengthCours"])])),_:2},1032,["component","componentProps"])))),128))])):(0,a.kq)("",!0)])),_:2},1024),e.days[`${n}`]?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(r.uT,{name:"CoursAnim"},{default:(0,a.w5)((()=>[0!=e.days[`${n}`].length||e.days[`${n}`].error||e.days[`${n}`].loading||e.currentIndex!=n||!e.loaded?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",h,[f,w,_,(0,a.Wm)(ce,{mode:"md",fill:"clear",onClick:t[4]||(t[4]=t=>e.changernPickerModalOpen(!0)),class:"changeDayButton"},{default:(0,a.w5)((()=>[(0,a.Uk)("Ouvrir le calendrier")])),_:1})]))])),_:2},1024),0!=e.days[`${n}`].length||"ERR_NETWORK"!=e.days[`${n}`].error||e.days[`${n}`].loading||e.connected?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",C,D)),0==e.days[`${n}`].length&&"ERR_NETWORK"==e.days[`${n}`].error&&!e.days[`${n}`].loading&&e.connected?((0,a.wg)(),(0,a.iD)("div",k,P)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("div",$,[(0,a.Wm)(ve)])]))])),_:2},1024)])),_:2},1032,["virtualIndex"])))),128))])),_:1},8,["modules","initialSlide"]),(0,a.Wm)(Pe,{canDismiss:!0,onDidDismiss:t[7]||(t[7]=t=>e.setNewCoursModalOpen(!1)),ref:"newCoursModal",class:"newCoursModal","is-open":e.newCoursModalOpen,"presenting-element":e.presentingElement},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{onClick:t[5]||(t[5]=t=>e.setNewCoursModalOpen(!1))},{default:(0,a.w5)((()=>[(0,a.Uk)("Annuler")])),_:1})])),_:1}),(0,a.Wm)(Se,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ke,{type:"text",name:"CourseTitle",ref:"newCoursNameRef",placeholder:"Nom du cours"},null,512)])),_:1}),(0,a.Wm)(y,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{onClick:t[6]||(t[6]=t=>e.addNewCours()),color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("Ajouter")])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(We,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"textInput"},{default:(0,a.w5)((()=>[E,(0,a.Wm)(ke,{type:"text",name:"Place",ref:"newCoursRoomRef",placeholder:"Lieu"},null,512)])),_:1}),(0,a.Wm)(S,{class:"textInput"},{default:(0,a.w5)((()=>[N,(0,a.Wm)(ke,{type:"text",name:"Person",ref:"newCoursTeacherRef",placeholder:"Professeur"},null,512)])),_:1}),(0,a.Wm)(S,{class:"textInput"},{default:(0,a.w5)((()=>[M,(0,a.Wm)(ke,{type:"text",name:"Group",ref:"newCoursGroupRef",placeholder:"Groupe (optionnel)"},null,512)])),_:1})])),_:1}),(0,a.Wm)(I,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"input"},{default:(0,a.w5)((()=>[j,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Heure de d√©but")])),_:1}),(0,a._)("div",x,[(0,a.Wm)(ke,{ref:"newCoursStartRef",class:"timeInInput",name:"Start",type:"time",value:"12:30"},null,512)])])),_:1}),(0,a.Wm)(S,{class:"input"},{default:(0,a.w5)((()=>[A,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Heure de fin")])),_:1}),(0,a._)("div",R,[(0,a.Wm)(ke,{class:"timeInInput",name:"End",ref:"newCoursEndRef",type:"time",value:"13:30"},null,512)])])),_:1})])),_:1}),(0,a.Wm)(I,{inset:"",class:"only-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"input"},{default:(0,a.w5)((()=>[L,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Couleur")])),_:1}),(0,a._)("div",U,[(0,a._)("input",q,null,512)])])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open","presenting-element"]),(0,a.Wm)(Pe,{"is-open":e.rnPickerModalOpen,ref:"rnPickerModal",class:"datetimeModal",onDidDismiss:t[10]||(t[10]=t=>e.changernPickerModalOpen(!1)),"keep-contents-mounted":!0,"initial-breakpoint":.55,breakpoints:[0,.55]},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)("S√©lection de la date")])),_:1}),(0,a.Wm)(y,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{onClick:t[8]||(t[8]=t=>e.confirmRnInput())},{default:(0,a.w5)((()=>[(0,a.Uk)("Termin√©")])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(We,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Te,{presentation:"date",ref:"rnInput",size:"cover",value:e.rnCalendarString,firstDayOfWeek:1,min:e.minDate,max:e.maxDate,"is-date-enabled":e.isDateAvailable,onIonChange:t[9]||(t[9]=t=>e.rnInputChanged())},null,8,["value","min","max","is-date-enabled"])])),_:1})])),_:1},8,["is-open"]),(0,a.Wm)(Pe,{ref:"coursModal",class:"coursModal","keep-contents-mounted":!0,"presenting-element":e.presentingElement,handle:!0,canDismiss:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.selectedCourse.name),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(We,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"info-item"},{default:(0,a.w5)((()=>[O,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[z,(0,a._)("h2",null,(0,l.zw)(e.selectedCourse.name),1)])),_:1}),(0,a.Wm)(ce,{class:"itemBtn",fill:"clear",slot:"end",onClick:t[11]||(t[11]=t=>e.shareCours(e.selectedCourse.originalCourse))},{default:(0,a.w5)((()=>[B,(0,a.Uk)(" Partager ")])),_:1})])),_:1}),(0,a.Wm)(S,{class:"info-item"},{default:(0,a.w5)((()=>[V,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[H,(0,a._)("h2",null,(0,l.zw)(e.selectedCourse.teachers),1)])),_:1})])),_:1}),(0,a.Wm)(S,{class:"info-item"},{default:(0,a.w5)((()=>[G,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[F,(0,a._)("h2",null,(0,l.zw)(e.selectedCourse.rooms),1)])),_:1})])),_:1}),e.selectedCourse.hasMemo?((0,a.wg)(),(0,a.j4)(S,{key:0,class:"info-item"},{default:(0,a.w5)((()=>[Z,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[J,(0,a._)("h2",Y,(0,l.zw)(e.selectedCourse.memo),1)])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(S,{class:"info-item"},{default:(0,a.w5)((()=>[K,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[Q,(0,a._)("h2",null,"De "+(0,l.zw)(e.selectedCourse.start)+" √† "+(0,l.zw)(e.selectedCourse.end),1)])),_:1}),e.selectedCourse.notificationEnabled?((0,a.wg)(),(0,a.j4)(ce,{key:1,class:"itemBtn",color:"danger",fill:"clear",slot:"end",onClick:t[13]||(t[13]=t=>e.unsetNotif(e.selectedCourse.originalCourse))},{default:(0,a.w5)((()=>[ee,(0,a.Uk)(" Ne pas me notifier ")])),_:1})):((0,a.wg)(),(0,a.j4)(ce,{key:0,class:"itemBtn",fill:"clear",slot:"end",onClick:t[12]||(t[12]=t=>e.setNotif(e.selectedCourse.originalCourse))},{default:(0,a.w5)((()=>[X,(0,a.Uk)(" Me notifier ")])),_:1}))])),_:1}),(0,a.Wm)(S,{class:"info-item"},{default:(0,a.w5)((()=>[te,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[se,(0,a._)("h2",null,(0,l.zw)(e.selectedCourse.length),1)])),_:1})])),_:1}),e.selectedCourse.isCancelled?((0,a.wg)(),(0,a.j4)(S,{key:1,class:"info-item",style:{color:"var(--ion-color-danger)"}},{default:(0,a.w5)((()=>[ae,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[ne,(0,a._)("h2",null,[(0,a.Uk)("Ce cours n'est pas maintenu"),oe,(0,a.Uk)("Motif : "+(0,l.zw)(e.selectedCourse.status),1)])])),_:1})])),_:1})):e.selectedCourse.hasStatus?((0,a.wg)(),(0,a.j4)(S,{key:2,class:"info-item",style:{color:"var(--ion-color-warning)"}},{default:(0,a.w5)((()=>[le,(0,a.Wm)(Ie,{class:"ion-text-wrap"},{default:(0,a.w5)((()=>[re,(0,a._)("h2",null,(0,l.zw)(e.selectedCourse.status),1)])),_:1})])),_:1})):((0,a.wg)(),(0,a.j4)(S,{key:3,class:"info-item"},{default:(0,a.w5)((()=>[ie,(0,a.Wm)(Ie,null,{default:(0,a.w5)((()=>[ue,(0,a._)("h2",null,(0,l.zw)(e.selectedCourse.status),1)])),_:1}),e.selectedCourse.custom?((0,a.wg)(),(0,a.j4)(ce,{key:0,color:"danger",fill:"clear",class:"itemBtn",slot:"end",onClick:t[14]||(t[14]=t=>e.deleteCustomCourse(e.selectedCourse.id))},{default:(0,a.w5)((()=>[de,(0,a.Uk)(" Supprimer ")])),_:1})):(0,a.kq)("",!0)])),_:1}))])),_:1})])),_:1})])),_:1},8,["presenting-element"])])),_:1})])),_:1},512)}s(7658),s(2707),s(7686),s(4506),s(3948);var me=s(8527),pe=s(2068);
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const ge=e=>{const t=new Map;t.set("web",{name:"web"});const s=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},a=(e,t)=>{s.platforms.set(e,t)},n=e=>{s.platforms.has(e)&&(s.currentPlatform=s.platforms.get(e))};return s.addPlatform=a,s.setPlatform=n,s},he=e=>e.CapacitorPlatforms=ge(e),fe=he("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{});fe.addPlatform,fe.setPlatform;var we;(function(e){e["Unimplemented"]="UNIMPLEMENTED",e["Unavailable"]="UNAVAILABLE"})(we||(we={}));class _e extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const Ce=e=>{var t,s;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"},ve=e=>{var t,s,a,n,o;const l=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},i=r.Plugins=r.Plugins||{},u=e.CapacitorPlatforms,d=()=>null!==l?l.name:Ce(e),c=(null===(t=null===u||void 0===u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||d,m=()=>"web"!==c(),p=(null===(s=null===u||void 0===u?void 0:u.currentPlatform)||void 0===s?void 0:s.isNativePlatform)||m,g=e=>{const t=v.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(c()))||!!w(e)},h=(null===(a=null===u||void 0===u?void 0:u.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||g,f=e=>{var t;return null===(t=r.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))},w=(null===(n=null===u||void 0===u?void 0:u.currentPlatform)||void 0===n?void 0:n.getPluginHeader)||f,_=t=>e.console.error(t),C=(e,t,s)=>Promise.reject(`${s} does not have an implementation of "${t}".`),v=new Map,y=(e,t={})=>{const s=v.get(e);if(s)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),s.proxy;const a=c(),n=w(e);let o;const u=async()=>(!o&&a in t?o=o="function"===typeof t[a]?await t[a]():t[a]:null!==l&&!o&&"web"in t&&(o=o="function"===typeof t["web"]?await t["web"]():t["web"]),o),d=(t,s)=>{var o,l;if(!n){if(t)return null===(l=t[s])||void 0===l?void 0:l.bind(t);throw new _e(`"${e}" plugin is not implemented on ${a}`,we.Unimplemented)}{const a=null===n||void 0===n?void 0:n.methods.find((e=>s===e.name));if(a)return"promise"===a.rtype?t=>r.nativePromise(e,s.toString(),t):(t,a)=>r.nativeCallback(e,s.toString(),t,a);if(t)return null===(o=t[s])||void 0===o?void 0:o.bind(t)}},m=t=>{let s;const n=(...n)=>{const o=u().then((o=>{const l=d(o,t);if(l){const e=l(...n);return s=null===e||void 0===e?void 0:e.remove,e}throw new _e(`"${e}.${t}()" is not implemented on ${a}`,we.Unimplemented)}));return"addListener"===t&&(o.remove=async()=>s()),o};return n.toString=()=>`${t.toString()}() { [capacitor code] }`,Object.defineProperty(n,"name",{value:t,writable:!1,configurable:!1}),n},p=m("addListener"),g=m("removeListener"),h=(e,t)=>{const s=p({eventName:e},t),a=async()=>{const a=await s;g({eventName:e,callbackId:a},t)},n=new Promise((e=>s.then((()=>e({remove:a})))));return n.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},n},f=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return n?h:p;case"removeListener":return g;default:return m(t)}}});return i[e]=f,v.set(e,{name:e,proxy:f,platforms:new Set([...Object.keys(t),...n?[a]:[]])}),f},b=(null===(o=null===u||void 0===u?void 0:u.currentPlatform)||void 0===o?void 0:o.registerPlugin)||y;return r.convertFileSrc||(r.convertFileSrc=e=>e),r.getPlatform=c,r.handleError=_,r.isNativePlatform=p,r.isPluginAvailable=h,r.pluginMethodNoop=C,r.registerPlugin=b,r.Exception=_e,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r.platform=r.getPlatform(),r.isNative=r.isNativePlatform(),r},ye=e=>e.Capacitor=ve(e),be=ye("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{}),De=be.registerPlugin;be.Plugins;const ke=De("CapacitorCalendar",{});var Se=s(9895);const Ie=e=>((0,a.dD)("data-v-0501b54a"),e=e(),(0,a.Cn)(),e),We={key:0},Pe=Ie((()=>(0,a._)("p",null,"D√©tails du cours",-1))),Te=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"history_edu",-1))),$e=Ie((()=>(0,a._)("p",null,"Nom de la mati√®re",-1))),Ee=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"face",-1))),Ne=Ie((()=>(0,a._)("p",null,"Professeurs",-1))),Me=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"meeting_room",-1))),je=Ie((()=>(0,a._)("p",null,"Salle",-1))),xe=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"groups",-1))),Ae=Ie((()=>(0,a._)("p",null,"Groupe",-1))),Re=Ie((()=>(0,a._)("p",null,"Horaires",-1))),Le=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),Ue=Ie((()=>(0,a._)("p",null,"D√©but",-1))),qe=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),Oe=Ie((()=>(0,a._)("p",null,"Fin",-1))),ze=Ie((()=>(0,a._)("p",null,"Statut du cours",-1))),Be=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"information-circle",-1))),Ve=Ie((()=>(0,a._)("p",null,"Statut du cours",-1))),He={key:0},Ge=Ie((()=>(0,a._)("br",null,null,-1))),Fe={key:1},Ze=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"sticky_note_2",-1))),Je=Ie((()=>(0,a._)("p",null,"M√©mo",-1))),Ye=Ie((()=>(0,a._)("p",null,"Actions",-1))),Ke=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"notifications",-1))),Qe=Ie((()=>(0,a._)("h2",null,"Activer les notifications",-1))),Xe=Ie((()=>(0,a._)("p",null,"Vous allez recevoir une notification 5 minutes avant le d√©but du cours",-1))),et=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1))),tt=Ie((()=>(0,a._)("h2",null,"Supprimer le cours personnalis√©",-1))),st=Ie((()=>(0,a._)("p",null,"Supprime le cours personnalis√© de votre emploi du temps",-1))),at=Ie((()=>(0,a._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"event",-1))),nt=Ie((()=>(0,a._)("h2",null,"Ajouter au calendrier",-1))),ot=Ie((()=>(0,a._)("p",null,"Ajouter ce cours au calendrier par d√©faut de votre appareil",-1)));function lt(e,t,s,n,o,r){const i=(0,a.up)("IonBackButton"),u=(0,a.up)("ion-buttons"),d=(0,a.up)("ion-title"),c=(0,a.up)("ion-skeleton-text"),m=(0,a.up)("ion-button"),p=(0,a.up)("IonToolbar"),g=(0,a.up)("IonHeader"),h=(0,a.up)("IonLabel"),f=(0,a.up)("ion-label"),w=(0,a.up)("ion-item"),_=(0,a.up)("IonList"),C=(0,a.up)("ion-toggle"),v=(0,a.up)("IonItem"),y=(0,a.up)("ion-content");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(g,{class:"AppHeader",translucent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,a.Wm)(i,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.openedCours?((0,a.wg)(),(0,a.j4)(d,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.pageTitle),1)])),_:1})):((0,a.wg)(),(0,a.j4)(d,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{style:{width:"200px"}})])),_:1})),(0,a.Wm)(u,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"itemBtn",onClick:t[0]||(t[0]=t=>e.shareCours())},{default:(0,a.w5)((()=>[(0,a.Uk)(" Partager ")])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(y,{fullscreen:!0},{default:(0,a.w5)((()=>[e.openedCours?((0,a.wg)(),(0,a.iD)("div",We,[(0,a.Wm)(h,{class:"listGroupTitle"},{default:(0,a.w5)((()=>[Pe])),_:1}),(0,a.Wm)(_,{class:"listGroup"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"info-item"},{default:(0,a.w5)((()=>[Te,(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[$e,(0,a._)("h2",null,(0,l.zw)(e.openCours_data.subject||"Pas de mati√®re"),1)])),_:1})])),_:1}),(0,a.Wm)(w,{class:"info-item"},{default:(0,a.w5)((()=>[Ee,(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[Ne,(0,a._)("h2",null,(0,l.zw)(e.teachers||"Pas de professeur"),1)])),_:1})])),_:1}),(0,a.Wm)(w,{class:"info-item"},{default:(0,a.w5)((()=>[Me,(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[je,(0,a._)("h2",null,(0,l.zw)(e.rooms||"Pas de salle"),1)])),_:1})])),_:1}),"true"==e.disableShowGroup&&e.groupNames.length?((0,a.wg)(),(0,a.j4)(w,{key:0,class:"info-item"},{default:(0,a.w5)((()=>[xe,(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[Ae,(0,a._)("h2",null,(0,l.zw)(e.groupNames||"Pas de groupe"),1)])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(h,{class:"listGroupTitle"},{default:(0,a.w5)((()=>[Re])),_:1}),(0,a.Wm)(_,{class:"listGroup times",lines:"none"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"info-item"},{default:(0,a.w5)((()=>[Le,(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[Ue,(0,a._)("h2",null,(0,l.zw)(new Date(e.openCours_time.start).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1),(0,a._)("h4",null,(0,l.zw)(new Date(e.openCours_time.start).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})),1)])),_:1})])),_:1}),(0,a.Wm)(w,{class:"info-item"},{default:(0,a.w5)((()=>[qe,(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[Oe,(0,a._)("h2",null,(0,l.zw)(new Date(e.openCours_time.end).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1),(0,a._)("h4",null,(0,l.zw)(new Date(e.openCours_time.end).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})),1)])),_:1})])),_:1})])),_:1}),e.openCours_status.status||e.openCours_data.memo?((0,a.wg)(),(0,a.j4)(h,{key:0,class:"listGroupTitle"},{default:(0,a.w5)((()=>[ze])),_:1})):(0,a.kq)("",!0),e.openCours_status.status||e.openCours_data.memo?((0,a.wg)(),(0,a.j4)(_,{key:1,class:"listGroup"},{default:(0,a.w5)((()=>[e.openCours_status.status?((0,a.wg)(),(0,a.j4)(w,{key:0,class:(0,l.C_)(["info-item",{cancelled:e.openCours_status.isCancelled}])},{default:(0,a.w5)((()=>[Be,(0,a.Wm)(f,{class:"ion-text-wrap"},{default:(0,a.w5)((()=>[Ve,e.openCours_status.isCancelled?((0,a.wg)(),(0,a.iD)("h2",He,[(0,a.Uk)("Ce cours n'est pas maintenu."),Ge,(0,a.Uk)("Motif : "+(0,l.zw)(e.openCours_status.status),1)])):((0,a.wg)(),(0,a.iD)("h2",Fe,(0,l.zw)(e.openCours_status.status),1))])),_:1})])),_:1},8,["class"])):(0,a.kq)("",!0),e.openCours_data.memo?((0,a.wg)(),(0,a.j4)(w,{key:1,class:"info-item"},{default:(0,a.w5)((()=>[Ze,(0,a.Wm)(f,{class:"ion-text-wrap"},{default:(0,a.w5)((()=>[Je,(0,a._)("h2",null,(0,l.zw)(e.openCours_data.memo),1)])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(h,{class:"listGroupTitle"},{default:(0,a.w5)((()=>[Ye])),_:1}),(0,a.Wm)(_,{class:"listGroup"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[Ke,(0,a.Wm)(f,{class:"ion-text-wrap"},{default:(0,a.w5)((()=>[Qe,Xe])),_:1}),(0,a.Wm)(C,{onIonChange:t[1]||(t[1]=t=>e.changeNotif(t)),slot:"end",value:e.notificationEnabled,ref:"toggle"},null,8,["value"])])),_:1}),e.openCours_status.isCustom?((0,a.wg)(),(0,a.j4)(v,{key:0,button:"",onClick:t[2]||(t[2]=t=>e.deleteCustomCourse())},{default:(0,a.w5)((()=>[et,(0,a.Wm)(f,{class:"ion-text-wrap"},{default:(0,a.w5)((()=>[tt,st])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(v,{button:"",onClick:t[3]||(t[3]=t=>e.addToCalendar())},{default:(0,a.w5)((()=>[at,(0,a.Wm)(f,{class:"ion-text-wrap"},{default:(0,a.w5)((()=>[nt,ot])),_:1})])),_:1})])),_:1})])):(0,a.kq)("",!0)])),_:1})],64)}s(2801),s(4916),s(5306);var rt=s(7806),it=s(4161),ut=s(3573);const dt=(0,a.aZ)({name:"FolderPage",components:{IonHeader:o.Gu,IonToolbar:o.sr,IonButtons:o.Sm,IonBackButton:o.oU,IonTitle:o.wd,IonContent:o.W2,IonSkeletonText:o.CK,IonList:o.q_,IonItem:o.Ie,IonLabel:o.Q$,IonToggle:o.ho},props:{urlCours:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"Timetable"==t.name&&(e="Emp. du temps"),{pageTitle:"Cours",backTitle:e,openedCours:[],openCours_course:[],openCours_data:[],openCours_status:[],openCours_time:[],teachers:"",rooms:"",groupNames:"",notificationEnabled:!1,disableShowGroup:localStorage.getItem("disableShowGroup")}},methods:{async addToCalendar(){if(Se.dV.isNativePlatform()){var e;let s={availableCalendars:[]};try{s=await ke.getAvailableCalendars()}catch(t){return void console.log("Error",t)}if(null!==(e=s)&&void 0!==e&&e.availableCalendars.length)try{const e=[];for(const m of s.availableCalendars)e.push({title:m.name});e.push({title:"Annuler",style:me.LE.Cancel});const t=await me.Vb.showActions({title:"S√©lectionnez un calendrier",message:"Choisissez le calendrier dans lequel ajouter le cours.",options:e});if(t.index===e.length-1)return;const a=s.availableCalendars[t.index],n=this.openCours_course.id,o=this.openCours_data.subject,l=this.teachers,r=this.rooms;let i="Le cours se d√©roule normalement.";this.openCours_status.status&&(i=this.openCours_status.status);const u=`Vous √™tes avec ${l} en ${r}. ${i}`,d=new Date(this.openCours_time.start).getTime(),c=new Date(this.openCours_time.end).getTime();await ke.createEvent({id:n,title:o,location:r,notes:u,startDate:d,endDate:c,calendarId:a.id}),await pe.V.alert({title:"Cours ajout√©",message:"Le cours a bien √©t√© ajout√© √† votre calendrier."})}catch(t){console.error("Error creating calendar event",t),await pe.V.alert({title:"Erreur",message:"Une erreur est survenue lors de l'ajout du cours √† votre calendrier."})}}},async deleteCustomCourse(){Se.dV.isNative?me.Vb.showActions({title:"√ätes-vous s√ªr de vouloir supprimer ce cours ?",message:"Ce cours devra √™tre recr√©√© si vous souhaitez le r√©cup√©rer.",options:[{title:"Supprimer",style:me.LE.Destructive},{title:"Annuler",style:me.LE.Cancel}]}).then((e=>{0==e.index&&this.deleteCourse()})):this.deleteCourse()},async deleteCourse(){let e=JSON.parse(localStorage.getItem("customCourses"))||[];e=e.filter((e=>e.course.course.id!=this.openCours_course.id)),localStorage.setItem("customCourses",JSON.stringify(e)),await pe.V.alert({title:"Cours supprim√©",message:"Le cours a bien √©t√© supprim√©."})},async openLink(e){await rt.A.open({url:e,presentationStyle:"popover"})},getStringToAsciiArray(e){const t=[];for(let s=0;s<e.length;s++){const a=e.charCodeAt(s);t.push(a)}return t},async shareCours(){const e={name:this.openedCours.data.subject,teachers:this.openedCours.data.teachers.join(", ")||"Aucun professeur",rooms:this.openedCours.data.rooms.join(", ")||"Aucune salle",start:new Date(this.openedCours.time.start).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),end:new Date(this.openedCours.time.end).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:this.openedCours.status.status,color:this.openedCours.course.color,memo:this.openedCours.data.memo||"none"};let t=JSON.parse(localStorage.getItem("userData")).student.name;t=t.split(" ")[t.split(" ").length-1],localStorage.getItem("customName")&&(t=localStorage.getItem("customName").split(" ")[localStorage.getItem("customName").split(" ").length-1]),t=this.getStringToAsciiArray(t).join("-"),e.name=this.getStringToAsciiArray(e.name).join("-"),e.teachers=this.getStringToAsciiArray(e.teachers).join("-"),e.rooms=this.getStringToAsciiArray(e.rooms).join("-"),null!=e.status?e.status=this.getStringToAsciiArray(e.status).join("-"):e.status=this.getStringToAsciiArray("null").join("-");let s="";s+=t+"$",s+=e.name+"$",s+=e.teachers+"$",s+=e.rooms+"$",s+=e.start+"$",s+=e.end+"$",s+=e.color+"$",s+=e.status+"$",s+=e.memo;const a="https://getpapillon.xyz/course?c="+btoa(s);await it.m.share({url:a,dialogTitle:"Partager votre cours de "+this.openedCours.data.subject})},async setNotif(){const e=this.openedCours;try{const s=e.data.subject,a=e.data.rooms[0]||"salle inconnue",n=e.data.teachers[0],o=new Date(e.time.start);if(o.setMinutes(o.getMinutes()-5),o.getTime()<(new Date).getTime())return!1;{const e=await ut.s.checkPermissions();if("granted"!=e)try{await ut.s.requestPermissions()}catch(t){return}try{await ut.s.schedule({notifications:[{title:`${s} - √áa commence bient√¥t !`,body:`Vous √™tes en ${a} avec ${n}. Le cours commence dans 5 minutes.`,id:1,schedule:{at:o},sound:"tone.ogg",attachments:null,actionTypeId:"",extra:null}]})}catch(t){return await pe.V.alert({title:"Erreur",message:"Une erreur est survenue lors de la cr√©ation de la notification. Veuillez r√©essayer."}),this.notificationEnabled=!1,void(this.$refs.notifSwitch.checked=!1)}this.notificationEnabled=!0}}catch(t){console.error(t)}},async unsetNotif(){const e=this.openedCours;await ut.s.getPending().then((t=>{const s=t.notifications,a=new Date(e.time.start);a.setMinutes(a.getMinutes()-5),s.forEach((async e=>{const t=new Date(e.schedule.at);t.getTime()==a.getTime()&&(await ut.s.cancel({notifications:[e]}),this.notificationEnabled=!1)}))}))},changeNotif(e){e.target.checked?this.setNotif():this.unsetNotif()}},async mounted(){if(this.urlCours){const e=this.urlCours,t=decodeURIComponent(e),s=JSON.parse(t);this.openedCours=s,this.openCours_course=s.course,this.openCours_data=s.data,this.openCours_status=s.status,this.openCours_time=s.time,this.teachers=s.data.teachers.join(", "),this.rooms=s.data.rooms.join(", "),this.groupNames=s.data.groupNames.join(", "),this.groupNames=this.groupNames.replace(/[[\]]/g,""),this.pageTitle=this.openCours_data.subject,this.pageTitle.length>11&&("Emp. du temps"==this.backTitle&&(this.backTitle="Ma journ."),this.pageTitle=this.pageTitle.substring(0,16)+"..."),await ut.s.getPending().then((e=>{const t=e.notifications,s=new Date(this.openCours_time.start);s.setMinutes(s.getMinutes()-5),t.forEach((e=>{const t=new Date(e.schedule.at);t.getTime()==s.getTime()&&(this.notificationEnabled=!0,this.$refs.toggle.$el.checked=!0)}))}))}return!1}});var ct=s(3744);const mt=(0,ct.Z)(dt,[["render",lt],["__scopeId","data-v-0501b54a"]]),pt=mt;var gt=s(5137),ht=s(2605),ft=s(3162),wt=s(6251),_t=s(6520),Ct=s(8903),vt=s(8565),yt=s(3883);const bt=e=>((0,a.dD)("data-v-65763ee7"),e=e(),(0,a.Cn)(),e),Dt={key:0,class:"dist"},kt={class:"CoursTime"},St={class:"text start"},It={class:"text end"},Wt={class:"cours"},Pt=bt((()=>(0,a._)("div",{class:"bg"},null,-1))),Tt=bt((()=>(0,a._)("div",{class:"CoursColor",slot:"start"},null,-1))),$t={class:"CoursData"},Et={class:"text CoursName"},Nt={class:"CoursInfoContainer"},Mt={key:0,class:"CoursInfo room"},jt=bt((()=>(0,a._)("span",{class:"material-symbols-outlined smol",slot:"start"},"location_on",-1))),xt={class:"text"},At={key:1,class:"separator"},Rt={class:"CoursInfo"},Lt=bt((()=>(0,a._)("span",{class:"material-symbols-outlined smol",slot:"start"},"face",-1))),Ut={class:"text"},qt={key:0,class:"CoursInfoContainer"},Ot={class:"CoursInfo"},zt=bt((()=>(0,a._)("span",{class:"material-symbols-outlined smol",slot:"start"},"groups",-1))),Bt={class:"text"},Vt={key:0,class:"text CoursInfo Status"},Ht={key:0,class:"material-symbols-outlined smol",slot:"start"},Gt={key:1,class:"material-symbols-outlined smol",slot:"start"},Ft={key:1,class:"text CoursInfo Status"},Zt=bt((()=>(0,a._)("span",{class:"material-symbols-outlined smol",slot:"start"},"quiz",-1))),Jt={key:2,class:"text CoursInfo Status"},Yt=bt((()=>(0,a._)("span",{class:"material-symbols-outlined smol",slot:"start"},"directions_walk",-1))),Kt={key:3,class:"text CoursInfo Status"},Qt=bt((()=>(0,a._)("span",{class:"material-symbols-outlined smol",slot:"start"},"sticky_note_2",-1)));function Xt(e,t,s,n,o,r){const i=(0,a.up)("ion-ripple-effect"),u=(0,a.up)("ion-label");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.distance&&!e.sameTime?((0,a.wg)(),(0,a.iD)("div",Dt)):(0,a.kq)("",!0),e.sameTime?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,l.C_)(e.classes+e.isCancelled),style:(0,l.j5)(`--backgroundColor: ${e.color};`),onClick:t[0]||(t[0]=t=>e.openCours())},[(0,a._)("div",kt,[(0,a._)("a",St,(0,l.zw)(e.start.toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1),(0,a._)("a",It,(0,l.zw)(e.end.toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1)]),(0,a._)("div",Wt,[(0,a.Wm)(i),e.coursPourcentVisible?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"progressDiv",style:(0,l.j5)(`width: ${e.coursPourcent}%;`)},null,4)):(0,a.kq)("",!0),Pt,Tt,(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",$t,[(0,a._)("a",Et,(0,l.zw)(e.subject),1),(0,a._)("div",null,[(0,a._)("div",Nt,[null!==e.rooms?((0,a.wg)(),(0,a.iD)("div",Mt,[jt,(0,a._)("a",xt,(0,l.zw)(e.rooms),1)])):(0,a.kq)("",!0),null!==e.rooms?((0,a.wg)(),(0,a.iD)("div",At)):(0,a.kq)("",!0),(0,a._)("div",Rt,[Lt,(0,a._)("a",Ut,(0,l.zw)(e.teachers),1)])]),"true"==e.disableShowGroup&&null!==e.groupNames?((0,a.wg)(),(0,a.iD)("div",qt,[(0,a._)("div",Ot,[zt,(0,a._)("a",Bt,(0,l.zw)(e.groupNames.replace(/[[\]]/g,"").replace(/_/g," ")),1)])])):(0,a.kq)("",!0)]),e.status?((0,a.wg)(),(0,a.iD)("a",Vt,[e.isCancelled?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",Ht,"info")),e.isCancelled?((0,a.wg)(),(0,a.iD)("span",Gt,"error")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,l.zw)(e.status),1)])):(0,a.kq)("",!0),e.isTest?((0,a.wg)(),(0,a.iD)("a",Ft,[Zt,(0,a.Uk)(" Vous avez un contr√¥le ")])):(0,a.kq)("",!0),e.isOuting?((0,a.wg)(),(0,a.iD)("a",Jt,[Yt,(0,a.Uk)(" Sortie scolaire ")])):(0,a.kq)("",!0),e.memo?((0,a.wg)(),(0,a.iD)("a",Kt,[Qt,(0,a.Uk)(" Contient un m√©mo ")])):(0,a.kq)("",!0)])])),_:1})])],6))],64)}s(6699);const es=(0,a.aZ)({name:"CoursElement",components:{IonLabel:o.Q$,IonRippleEffect:o.H$},props:{subject:{type:String,required:!0},teachers:{type:String,required:!1,default:"Pas de professeur"},rooms:{type:String,required:!1,default:"Pas de salle"},groupNames:{type:String,required:!1,default:null},memo:{type:Boolean,required:!1,default:!1},start:{type:Date,required:!1,default:new Date},end:{type:Date,required:!1,default:new Date},color:{type:String,required:!1,default:"var(--ion-color-primary)"},isCancelled:{type:Boolean,required:!1,default:!1},isExempted:{type:Boolean,required:!1,default:!1},isDetention:{type:Boolean,required:!1,default:!1},isOuting:{type:Boolean,required:!1,default:!1},isTest:{type:Boolean,required:!1,default:!1},status:{type:String,required:!1,default:"normal"},sameTime:{type:Boolean,required:!1,default:!1},distance:{type:Boolean,required:!1,default:!1},lengthCours:{type:Number,required:!1,default:0}},data(){return{classes:"mainElemCours ion-activatable ripple-parent rounded-rectangle ",newColor:"",coursPourcent:0,coursPourcentVisible:!1,intervalUpdateProgressDiv:null,showPastProgress:"false"!=localStorage.getItem("tweakProgressBarShowPast"),disableShowGroup:localStorage.getItem("disableShowGroup")}},setup(){return{}},methods:{openCours(){this.$emit("open")},beforeRenderedProgressDiv(){if("true"!=localStorage.getItem("tweakProgressBar"))return!1;const e=new Date;`${e.getUTCDate()}-${e.getMonth()}`!=`${this.start.getUTCDate()}-${this.start.getMonth()}`?(this.classes.includes("progressDivEnabled")&&(this.classes=this.classes.replace("progressDivEnabled","")),this.coursPourcentVisible&&(this.coursPourcent=0,this.coursPourcentVisible=!1,clearInterval(this.intervalUpdateProgressDiv))):(this.coursPourcentVisible||(this.coursPourcentVisible=!0),this.autoUpdateProgressDiv(),this.updateProgressDiv())},updateProgressDiv(){const e=new Date;if(`${e.getUTCDate()}-${e.getMonth()}`!=`${this.start.getUTCDate()}-${this.start.getMonth()}`)return this.coursPourcent=0,this.coursPourcentVisible=!1,clearInterval(this.intervalUpdateProgressDiv),this.classes.includes("progressDivEnabled")&&(this.classes=this.classes.replace("progressDivEnabled","")),!1;if(3600*e.getHours()+60*e.getMinutes()+e.getSeconds()>3600*this.end.getHours()+60*this.end.getMinutes()+this.end.getSeconds()&&this.showPastProgress)return this.classes.includes("progressDivEnabled")||(this.classes+=" progressDivEnabled "),this.coursPourcentVisible=!0,this.coursPourcent=100,!1;if(this.classes.includes("progressDivEnabled")&&(this.classes=this.classes.replace("progressDivEnabled","")),3600*e.getHours()+60*e.getMinutes()+e.getSeconds()>=3600*this.start.getHours()+60*this.start.getMinutes()+this.start.getSeconds()&&3600*e.getHours()+60*e.getMinutes()+e.getSeconds()<=3600*this.end.getHours()+60*this.end.getMinutes()+this.end.getSeconds()){const t=(3600*e.getHours()+60*e.getMinutes()+e.getSeconds()-(3600*this.start.getHours()+60*this.start.getMinutes()+this.start.getSeconds()))/(3600*this.end.getHours()+60*this.end.getMinutes()+this.end.getSeconds()-(3600*this.start.getHours()+60*this.start.getMinutes()+this.start.getSeconds()))*100;this.coursPourcentVisible=!0,this.classes.includes("progressDivEnabled")||(this.classes+=" progressDivEnabled "),setTimeout((()=>{this.coursPourcent=t}),100)}},autoUpdateProgressDiv(){null!=this.intervalUpdateProgressDiv&&clearInterval(this.intervalUpdateProgressDiv),this.intervalUpdateProgressDiv=setInterval((()=>{this.updateProgressDiv()}),5e3)}},mounted(){this.distance&&(this.classes+=" distance "),this.lengthCours>1.2&&(this.classes+=" long "),this.newColor=wt.Z.lightenColor(this.color,-20)},beforeUnmount(){null!=this.intervalUpdateProgressDiv&&clearInterval(this.intervalUpdateProgressDiv)},beforeUpdate(){this.beforeRenderedProgressDiv()}}),ts=(0,ct.Z)(es,[["render",Xt],["__scopeId","data-v-65763ee7"]]),ss=ts;var as=s(1586);const ns=(0,a.aZ)({name:"FolderPage",components:{IonButtons:o.Sm,IonButton:o.YG,IonContent:o.W2,IonHeader:o.Gu,IonMenuButton:o.fG,IonPage:o._i,IonTitle:o.wd,IonToolbar:o.sr,IonList:o.q_,IonModal:o.ki,CoursElement:ss,IonDatetime:o.x4,Swiper:yt.tq,SwiperSlide:yt.o5,IonRefresher:o.nJ,IonRefresherContent:o.Wo,IonItem:o.Ie,IonLabel:o.Q$,IonSpinner:o.PQ,IonFab:o.IJ,IonInput:o.pK,IonProgressBar:o.X7,IonNavLink:o.Qx,IonPopover:o.d8},setup(){return{baseIndex:250,minDate:s(7585).xD(),maxDate:s(7585).Bq(),isDateAvailable:s(7585).eB,calendarOutline:Ct.rom,calendarSharp:Ct.BGW,todayOutline:Ct.gZA,todaySharp:Ct.l7O,presentingElement:null,Virtual:vt.oM,EffectCoverflow:vt.lI,ey:[]}},methods:{createDateString(e){const t=new Date(e),s=t.toLocaleString("default",{weekday:"long"}).slice(0,3);return s+". "+t.getDate()},rnInputChanged(){if(this.isChangingDate)this.isChangingDate=!1;else{const e=new Date(this.$refs.rnInput.$el.value);this.$rn=e,this.baseRn=e,this.swiper.slideTo(this.baseIndex,0,!1),this.days=[],document.dispatchEvent(new CustomEvent("rnChanged",{detail:e}))}},confirmRnInput(){this.changernPickerModalOpen(!1)},openRnPicker(){this.$refs.rnPickerModal.$el.present()},editTimetable(e,t){e=(0,_t.Z)(e);const s=JSON.parse(localStorage.getItem("customCourses"))||[];return s.forEach((s=>{const a=new Date(s.day),n=new Date(t),o=new Date(s.course.time.start),l=new Date(s.course.time.end);o.setDate(n.getDate()),o.setMonth(n.getMonth()),o.setFullYear(n.getFullYear()),l.setDate(n.getDate()),l.setMonth(n.getMonth()),l.setFullYear(n.getFullYear()),a.getDate()==n.getDate()&&a.getMonth()==n.getMonth()&&a.getFullYear()==n.getFullYear()&&(s.course.time.start=o,s.course.time.end=l,s.course.course.color=wt.Z.getSubjectColor(s.course.data.subject,wt.Z.getRandomColor(!0),!0),e.push(s.course))})),e.sort(((e,t)=>{const s=new Date(e.time.start),a=new Date(t.time.start);return s-a})),e},resetSwiper(){this.day1.error="STILL_LOADING",this.day0.error="STILL_LOADING",this.day2.error="STILL_LOADING"},async getTimetables(e,t,s){const a=setTimeout((()=>{this.isLoading=!0}),500);for(let n=0;n<3;n++){const o=this.swiper.realIndex+(n-1),l=this.baseIndex-o;let r=new Date(this.baseRn);t&&(r=new Date(this.$rn)),r.setDate(r.getDate()-l),1==n&&(this.$rn=r,this.rnButtonString=this.createDateString(this.$rn),this.rnCalendarString=this.$rn.toISOString().split("T")[0]),(0,as.Z)(r,e).then((e=>{2==n&&(clearTimeout(a),this.isLoading=!1,s&&s.detail.complete()),e.error?"ERR_BAD_REQUEST"==e.error?this.days[o]&&(this.days[o].loading=!0):(this.days[o]=[],this.days[o]&&(this.days[o].error=e.error)):(this.days[o]=this.editTimetable(e,r),this.loadedrnButtonString=this.createDateString(this.$rn),this.days[o]&&(this.days[o].loading=!1))}))}this.connected=await ht.Z.getStatus(),this.connected=this.connected.connected},handleRefresh(e){this.getTimetables(!0,!1,e)},getStringToAsciiArray(e){const t=[];for(let s=0;s<e.length;s++){const a=e.charCodeAt(s);t.push(a)}return t},setNewCoursModalOpen(e){this.newCoursModalOpen=e},addNewCours(){const e=new Date,t=new Date,s=this.$refs.newCoursStartRef.$el.value;if(e.setHours(s.split(":")[0]),e.setMinutes(s.split(":")[1]),t.setHours(this.$refs.newCoursEndRef.$el.value.split(":")[0]),t.setMinutes(this.$refs.newCoursEndRef.$el.value.split(":")[1]),""==s||""==this.$refs.newCoursEndRef.$el.value||""==this.$refs.newCoursNameRef.$el.value||""==this.$refs.newCoursTeacherRef.$el.value||""==this.$refs.newCoursRoomRef.$el.value)return void ft.Z.presentError("Veuillez remplir tous les champs","danger","Tous les champs sont obligatoires √† l'exception du groupe");const a=this.$refs.newCoursColorRef.value;"#000000"!==a&&wt.Z.getSubjectColor(this.$refs.newCoursNameRef.$el.value,a,!0);const n={course:{id:Math.floor(1e7*Math.random()),color:a,num:Math.floor(1e7*Math.random())},data:{subject:this.$refs.newCoursNameRef.$el.value,teachers:[this.$refs.newCoursTeacherRef.$el.value],rooms:[this.$refs.newCoursRoomRef.$el.value],groupNames:[this.$refs.newCoursGroupRef.$el.value],memo:null,hasMemo:!1,linkVirtual:null},time:{start:e,end:t},status:{isCancelled:!1,isExempted:!1,isDetention:!1,isOuting:!1,isTest:!1,isCustom:!0,status:null}},o={day:this.$rn,course:n},l=JSON.parse(localStorage.getItem("customCourses"))||[];l.push(o),localStorage.setItem("customCourses",JSON.stringify(l)),this.setNewCoursModalOpen(!1),this.getTimetables(!0)},changernPickerModalOpen(e){this.rnPickerModalOpen=e},deleteCustomCourse(e){let t=JSON.parse(localStorage.getItem("customCourses"))||[];t=t.filter((t=>t.course.course.id!=e)),localStorage.setItem("customCourses",JSON.stringify(t)),this.$refs.coursModal.$el.dismiss(),this.getTimetables(!0)},async unsetNotif(e){await ut.s.getPending().then((t=>{const s=t.notifications,a=new Date(e.time.start);a.setMinutes(a.getMinutes()-5),s.forEach((async t=>{const s=new Date(t.schedule.at);s.getTime()==a.getTime()&&(await ut.s.cancel({notifications:[t]}),this.selectedCourse.notificationEnabled=!1,ft.Z.presentToastFull("Notifications d√©sactiv√©es pour "+e.data.subject,"Vous ne receverez plus de notifications pour ce cours","light",Ct.N9d))}))}))},async displayBetaMsg(){const e=await o.Cl.create({header:"Emploi du temps",message:"Cette page subit actuellement des grands changements. Son comportement pourrait √™tre inhabituel et des bugs peuvent survenir.",mode:"md",buttons:["Je comprends"]});await e.present()},async addDayToCalendar(){if(Se.dV.isNativePlatform()){var e;let s={availableCalendars:[]};try{s=await ke.getAvailableCalendars()}catch(t){return void console.log("Error",t)}if(null!==(e=s)&&void 0!==e&&e.availableCalendars.length)try{const e=[];for(const o of s.availableCalendars)e.push({title:o.name});e.push({title:"Annuler",style:me.LE.Cancel});const t=await me.Vb.showActions({title:"S√©lectionnez un calendrier",message:"Choisissez le calendrier dans lequel ajouter le cours.",options:e});if(t.index===e.length-1)return;const a=s.availableCalendars[t.index],n=this.days[this.currentIndex];if(n.length<=0)return void await pe.V.alert({title:"Aucun cours",message:"Il n'y a aucun cours √† ajouter au calendrier.",mode:"md",buttons:["Ok"]});for(const s of n)if(!s.status.isCancelled){const e=s.course.id,t=s.data.subject,n=s.data.rooms.join(", "),o=s.data.teachers.join(", "),l=new Date(s.time.start).getTime(),r=new Date(s.time.end).getTime();let i,u="Le cours se d√©roule normalement.";s.status.status&&(u=s.status.status),i=o&&null===n?`Ce cours n'a ni salle et ni professeur attribu√© √† celui-ci. ${u}`:`Vous √™tes avec ${o} en ${n}. ${u}`,await ke.createEvent({id:e,title:t,location:n,notes:i,startDate:l,endDate:r,calendarId:a.id})}await pe.V.alert({title:"Tous les cours ont √©t√© ajout√©s !",message:"Votre journ√©e a bien √©t√© ajout√©e √† votre calendrier."})}catch(t){console.error("Error creating calendar event",t),await pe.V.alert({title:"Erreur",message:"Une erreur est survenue lors de l'ajout des cours √† votre calendrier."})}}}},data(){const e=Array.from({length:2*this.baseIndex}).map(((e,t)=>`Slide ${t}`));return{CoursView:pt,baseRn:new Date,slides:e,currentIndex:this.baseIndex,rnButtonString:this.createDateString(this.$rn),loadedrnButtonString:this.createDateString(this.$rn),rnCalendarString:this.$rn.toISOString().split("T")[0],day0:[],day1:[],day2:[],days:[],connected:!1,shouldResetSwiper:!1,selectedCourse:{name:"",teacher:"",room:"",groupNames:"",start:"",end:"",length:"",status:"",notificationEnabled:!1},newCoursModalOpen:!1,rnPickerModalOpen:!1,isChangingDate:!1,isLoading:!0,swiper:null,loaded:!1}},mounted(){this.swiper=this.$refs.swiper.$el.swiper,this.loaded=!0,this.presentingElement=this.$refs.pageHere.$el,document.addEventListener("rnChanged",(e=>{this.rnButtonString=this.createDateString(e.detail),this.getTimetables(!1,e.detail)})),this.getTimetables(),document.addEventListener("tokenUpdated",(()=>{this.getTimetables()})),this.swiper.on("slideChangeTransitionEnd",(()=>{this.resetSwiper(),this.isChangingDate=!0,this.getTimetables()})),this.swiper.on("activeIndexChange",(()=>{this.currentIndex=this.swiper.activeIndex})),gt.g.addListener("backButton",(()=>{this.newCoursModalOpen?this.newCoursModalOpen=!1:this.rnPickerModalOpen&&(this.rnPickerModalOpen=!1)}))}}),os=(0,ct.Z)(ns,[["render",ce],["__scopeId","data-v-09cc22ac"]]),ls=os,rs={components:{IonNav:o.O1,IonPage:o._i},data:function(){return{component:ls}}},is=(0,ct.Z)(rs,[["render",n]]),us=is}}]);
//# sourceMappingURL=397.8e0a0c7b.js.map